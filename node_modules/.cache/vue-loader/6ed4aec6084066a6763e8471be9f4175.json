{"remainingRequest":"E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HBuilderProjects\\supermall1\\src\\views\\cart\\childCart\\CartBottomBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HBuilderProjects\\supermall1\\src\\views\\cart\\childCart\\CartBottomBar.vue","mtime":1614931724048},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js","mtime":1613721456817},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js","mtime":1613721440296}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CheckButton from './CheckButton'\n\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: \"CartBottomBar\",\n  components: {\n    CheckButton,\n  },\n  computed:{\n    ...mapGetters(['cartLength','cartList']),\n    totalPrice(){\n      return '￥' + this.$store.state.cartList.filter(item => {\n        return item.checked\n      }).reduce((preValue,item) => {\n        return preValue + item.price*item.count\n      },0).toFixed(2)\n    },\n    checKedLength(){\n      return this.$store.state.cartList.filter(item => item.checked).length\n    },\n    // isSelectAll(){\n    //   return !(this.$store.state.cartList.filter(item => item.checked).length)\n    //   console.log('--');\n    // }\n\n  isSelectAll: function () {\n      if (this.$store.getters.cartList.length === 0)return false;\n    return this.$store.getters.cartList.find(item => item.checked === false) === undefined;\n  }\n  },\n  methods: {\n    checkBtnClick: function () {\n \n      // 1.判断是否有未选中的按钮\n      let isSelectAll = this.$store.getters.cartList.find(item =>!item.checked);\n\n      // 2.有未选中的内容, 则全部选中\n      if (isSelectAll) {\n        this.$store.state.cartList.forEach(item => {\n          item.checked = true;\n        });\n      } else {\n        this.$store.state.cartList.forEach(item => {\n          item.checked = false;\n        });\n      }\n    },\n    calcClick(){\n      if (!this.isSelectAll) {\n        this.$toast.show('请选择购买的商品',2000)\n      }\n    },\n  }\n}\n",{"version":3,"sources":["CartBottomBar.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartBottomBar.vue","sourceRoot":"src/views/cart/childCart","sourcesContent":["<template>\n    <div class=\"cart-bottom-bar\">\n      <div class=\"check-content\">\n        <check-button @checkBtnClick=\"checkBtnClick\" v-model=\"isSelectAll\" class=\"check-button\"></check-button>\n        <span>全选</span>\n      </div>\n      <p class=\"price\">合计:{{totalPrice}}</p>\n      <div class=\"calculate\" @click=\"calcClick\">清空购物车({{checKedLength}})</div>\n    </div>\n</template>\n<script>\n  import CheckButton from './CheckButton'\n\n  import { mapGetters } from 'vuex'\n\n  export default {\n    name: \"CartBottomBar\",\n    components: {\n      CheckButton,\n    },\n    computed:{\n      ...mapGetters(['cartLength','cartList']),\n      totalPrice(){\n        return '￥' + this.$store.state.cartList.filter(item => {\n          return item.checked\n        }).reduce((preValue,item) => {\n          return preValue + item.price*item.count\n        },0).toFixed(2)\n      },\n      checKedLength(){\n        return this.$store.state.cartList.filter(item => item.checked).length\n      },\n      // isSelectAll(){\n      //   return !(this.$store.state.cartList.filter(item => item.checked).length)\n      //   console.log('--');\n      // }\n\n    isSelectAll: function () {\n        if (this.$store.getters.cartList.length === 0)return false;\n      return this.$store.getters.cartList.find(item => item.checked === false) === undefined;\n    }\n    },\n    methods: {\n      checkBtnClick: function () {\r\n\t\t \n        // 1.判断是否有未选中的按钮\n        let isSelectAll = this.$store.getters.cartList.find(item =>!item.checked);\n\n        // 2.有未选中的内容, 则全部选中\n        if (isSelectAll) {\n          this.$store.state.cartList.forEach(item => {\n            item.checked = true;\n          });\n        } else {\n          this.$store.state.cartList.forEach(item => {\n            item.checked = false;\n          });\n        }\n      },\n      calcClick(){\n        if (!this.isSelectAll) {\n          this.$toast.show('请选择购买的商品',2000)\n        }\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  .cart-bottom-bar{\r\n\tmargin-top: -44px;\n    background-color:#a3a3a5;\n    height: 40px;\n    display: flex;\n    font-size: 15px;\n  }\n  .check-content{\n    display: flex;\n    /*justify-content: center;*/\n    /*align-items: center;*/\n    width: 55px;\n    line-height: 40px;\n    margin-left: 7px;\n  }\n  .check-button{\n    width: 20px;\n    height: 20px;\n    line-height: 20px;\n    padding-top: 10px;\n  }\n  .price{\n    margin-left: 20px;\n    line-height: 40px;\n    flex: 1;\n  }\n  .calculate{\n    width: 110px;\n    padding-right: 0px;\n    line-height: 40px;\n\n    background-color:#ffe817;\n    text-align: center;\n  }\n</style>\n"]}]}