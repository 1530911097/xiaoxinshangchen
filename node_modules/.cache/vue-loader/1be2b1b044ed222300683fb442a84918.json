{"remainingRequest":"E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue","mtime":1615976955167},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js","mtime":1613721456817},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js","mtime":1613721440296}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport scroll from '../../components/common/scroll/Scroll.vue'\nimport navbar from '../../components/common/navar/Navbar.vue'\nimport HomeSwiper from './childHome/HomeSwiper.vue'\nimport RecommendView from './childHome/RecommendView.vue'\nimport Feature from './childHome/Feature.vue'\nimport TabControl from '../../components/content/tabControl/TabControl.vue'\nimport Goods from '../../components/content/goods/Goods.vue'\nimport {\n\tgetHomeMultidata,\n\tgetGoods\n} from '../../network/home.js'\nimport backTop from '../../components/content/backTop/backTop.vue'\nexport default {\n\tname: 'Home',\n\tcomponents: {\n\t\tnavbar,\n\t\tHomeSwiper,\n\t\tRecommendView,\n\t\tFeature,\n\t\tTabControl,\n\t\tGoods,\n\t\tbackTop,\n\t\tscroll\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tbanners: [],\n\t\t\trecommend: [],\n\t\t\tgoods: {\n\t\t\t\t/* 初始化保存数组，goods的单向绑定*/\n\t\t\t\t/* 因为是三页*/\n\t\t\t\t'pop': {\n\t\t\t\t\tpage: 0,\n\t\t\t\t\tlist: []\n\t\t\t\t},\n\t\t\t\t/* page:页。list:[]条*/\n\t\t\t\t'new': {\n\t\t\t\t\tpage: 0,\n\t\t\t\t\tlist: []\n\t\t\t\t},\n\t\t\t\t'sell': {\n\t\t\t\t\tpage: 0,\n\t\t\t\t\tlist: []\n\t\t\t\t},\n\t\t\t},\n\t\t\tcurrentType: 'pop',\n\t\t\t/* 这里是为了默认一个值，来显示数据*/\n\t\t\ttabOffsetTop: 0,\n\t\t\tisShow: false,\n\t\t\t/* 当默认开始消失，等滑动超过1000这显示*/\n\t\t\tistabFixed: false,\n\t\t\trecommendImg: false\n\t\t}\n\t},\n\tcomputed: {\n\t\t/*这里使用的是，计算方法computed*/\n\t\tshowGoods() {\n\t\t\t/* 这里定义了商品的方法*/\n\t\t\treturn this.goods[this.currentType].list /* 这个数组，指向这个元素的.list*/\n\t\t}\n\t},\n\t/* -2552  14838  15035*/\n\tcreated() {\n\t\tthis.getHomeMultidata()\n\t\tthis.getGoods('pop')\n\t\tthis.getGoods('new')\n\t\tthis.getGoods('sell')\n\t\t/* 利用refs去获取tab-control组件的元素的*/\n\t},\n\tmounted() {\n\tconst refresh = this.debounce(this.$refs.scroll&&this.$refs.scroll.refresh,500)\n\tthis.$bus.$on('itemImageLoad', () => {\n\t\trefresh()\n\t})\n\t},\n\t/* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\n\tmethods: {\n\t\tdebounce(func, delay) {\n\t\t\tlet timer = null\n\t\t\treturn function(...args) {\n\t\t\t\tif (timer) return clearTimeout(timer)\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tfunc.apply(this, args)\n\t\t\t\t}, delay)\n\t\t\t}\n\t\t\n\t\t},\n\t\ttabClick(index) {\n\t\t\tswitch (index) {\n\t\t\t\tcase 0:\n\t\t\t\t\tthis.currentType = 'pop'\n\t\t\t\t\tbreak\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.currentType = 'new'\n\t\t\t\t\tbreak\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.currentType = 'sell'\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\t/* \t\tthis.$refs.tabControl1.currentIndex = index; //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\n\t\t\t\t\tthis.$refs.tabControl2.currentIndex = index; */\n\t\t},\n\t\tcontentScroll(position) {\n\t\t\tthis.isShow = -position.y > 1000; /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\n\t\t\tthis.istabFixed = (-position.y + 36) > this.tabOffsetTop\n\n\t\t},\n\n\t\trecommendImgLoad() {\n\t\t\tthis.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop\n\t\t\t/* 通过offsetTop js属性拿到可视图高561px*/\n\t\t},\n\t\tswiperImgLoad() {},\n\t\tLoadMore() {\n\n\t\t\tthis.getGoods(this.currentType);\n\t\t\tthis.$refs.scroll.scroll.refresh()\n\t\t},\n\t\tbackClick() {\n\t\t\tthis.$refs.scroll.scroll.scrollTo(0, 0, 1000)\n\t\t},\n\t\tgetHomeMultidata() {\n\t\t\tgetHomeMultidata().then(res => {\n\t\t\t\tthis.banners = res.data.banner.list\n\t\t\t\tthis.recommend = res.data.recommend.list\n\t\t\t})\n\t\t},\n\t\tgetGoods(type) {\n\t\t\tconst page = this.goods[type].page + 1\n\t\t\tgetGoods(type, page).then(res => {\n\t\t\t\tthis.goods[type].list.push(...res.data.list)\n\t\t\t\tthis.goods[type].page += 1\n\t\t\t\tthis.$refs.scroll.finishPullUp() /* 这个无限的加 */\n\n\t\t\t})\n\t\t},\n\n\t}\n\n}\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n\t<div id=\"home\">\r\n\t\t<navbar class=\"home-navbar\"><template #center>购物街</template></navbar>\r\n\t\t<tab-control :titles=\"['流行','新款','推荐']\" @tabClick=\"tabClick\" class=\"tab-home-control\" v-show=\"istabFixed\"\r\n\t\t\tref=\"tabControl1\" />\r\n\t\t<scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\" @pullingUp=\"LoadMore\"\r\n\t\t\t:probe-type=\"3\">\r\n\r\n\t\t\t<template #scroll>\r\n\t\t\t\t<home-swiper :banners=\"banners\" @swiperImgLoad=\"swiperImgLoad\"></home-swiper>\r\n\t\t\t\t<recommend-view :recommend=\"recommend\" @recommendImgLoad.once=\"recommendImgLoad\"></recommend-view>\r\n\t\t\t\t<Feature></Feature>\r\n\t\t\t\t<tab-control :titles=\"['流行','新款','推荐']\" @tabClick=\"tabClick\" ref=\"tabControl2\"></tab-control>\r\n\t\t\t\t<Goods :goods=\"showGoods\" />{{showGoods.img}}</Goods>\r\n\t\t\t</template>\r\n\t\t</scroll>\r\n\t\t<back-top @click.native='backClick' v-show=\"isShow\"></back-top>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport scroll from '../../components/common/scroll/Scroll.vue'\r\n\timport navbar from '../../components/common/navar/Navbar.vue'\r\n\timport HomeSwiper from './childHome/HomeSwiper.vue'\r\n\timport RecommendView from './childHome/RecommendView.vue'\r\n\timport Feature from './childHome/Feature.vue'\r\n\timport TabControl from '../../components/content/tabControl/TabControl.vue'\r\n\timport Goods from '../../components/content/goods/Goods.vue'\r\n\timport {\r\n\t\tgetHomeMultidata,\r\n\t\tgetGoods\r\n\t} from '../../network/home.js'\r\n\timport backTop from '../../components/content/backTop/backTop.vue'\r\n\texport default {\r\n\t\tname: 'Home',\r\n\t\tcomponents: {\r\n\t\t\tnavbar,\r\n\t\t\tHomeSwiper,\r\n\t\t\tRecommendView,\r\n\t\t\tFeature,\r\n\t\t\tTabControl,\r\n\t\t\tGoods,\r\n\t\t\tbackTop,\r\n\t\t\tscroll\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbanners: [],\r\n\t\t\t\trecommend: [],\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\t/* 初始化保存数组，goods的单向绑定*/\r\n\t\t\t\t\t/* 因为是三页*/\r\n\t\t\t\t\t'pop': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/* page:页。list:[]条*/\r\n\t\t\t\t\t'new': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'sell': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcurrentType: 'pop',\r\n\t\t\t\t/* 这里是为了默认一个值，来显示数据*/\r\n\t\t\t\ttabOffsetTop: 0,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\t/* 当默认开始消失，等滑动超过1000这显示*/\r\n\t\t\t\tistabFixed: false,\r\n\t\t\t\trecommendImg: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t/*这里使用的是，计算方法computed*/\r\n\t\t\tshowGoods() {\r\n\t\t\t\t/* 这里定义了商品的方法*/\r\n\t\t\t\treturn this.goods[this.currentType].list /* 这个数组，指向这个元素的.list*/\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* -2552  14838  15035*/\r\n\t\tcreated() {\r\n\t\t\tthis.getHomeMultidata()\r\n\t\t\tthis.getGoods('pop')\r\n\t\t\tthis.getGoods('new')\r\n\t\t\tthis.getGoods('sell')\r\n\t\t\t/* 利用refs去获取tab-control组件的元素的*/\r\n\t\t},\r\n\t\tmounted() {\r\n\t\tconst refresh = this.debounce(this.$refs.scroll&&this.$refs.scroll.refresh,500)\r\n\t\tthis.$bus.$on('itemImageLoad', () => {\r\n\t\t\trefresh()\r\n\t\t})\r\n\t\t},\r\n\t\t/* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\r\n\t\tmethods: {\r\n\t\t\tdebounce(func, delay) {\r\n\t\t\t\tlet timer = null\r\n\t\t\t\treturn function(...args) {\r\n\t\t\t\t\tif (timer) return clearTimeout(timer)\r\n\t\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t\tfunc.apply(this, args)\r\n\t\t\t\t\t}, delay)\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\ttabClick(index) {\r\n\t\t\t\tswitch (index) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.currentType = 'pop'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.currentType = 'new'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.currentType = 'sell'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\t/* \t\tthis.$refs.tabControl1.currentIndex = index; //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\r\n\t\t\t\t\t\tthis.$refs.tabControl2.currentIndex = index; */\r\n\t\t\t},\r\n\t\t\tcontentScroll(position) {\r\n\t\t\t\tthis.isShow = -position.y > 1000; /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\r\n\t\t\t\tthis.istabFixed = (-position.y + 36) > this.tabOffsetTop\r\n\r\n\t\t\t},\r\n\r\n\t\t\trecommendImgLoad() {\r\n\t\t\t\tthis.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop\r\n\t\t\t\t/* 通过offsetTop js属性拿到可视图高561px*/\r\n\t\t\t},\r\n\t\t\tswiperImgLoad() {},\r\n\t\t\tLoadMore() {\r\n\r\n\t\t\t\tthis.getGoods(this.currentType);\r\n\t\t\t\tthis.$refs.scroll.scroll.refresh()\r\n\t\t\t},\r\n\t\t\tbackClick() {\r\n\t\t\t\tthis.$refs.scroll.scroll.scrollTo(0, 0, 1000)\r\n\t\t\t},\r\n\t\t\tgetHomeMultidata() {\r\n\t\t\t\tgetHomeMultidata().then(res => {\r\n\t\t\t\t\tthis.banners = res.data.banner.list\r\n\t\t\t\t\tthis.recommend = res.data.recommend.list\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetGoods(type) {\r\n\t\t\t\tconst page = this.goods[type].page + 1\r\n\t\t\t\tgetGoods(type, page).then(res => {\r\n\t\t\t\t\tthis.goods[type].list.push(...res.data.list)\r\n\t\t\t\t\tthis.goods[type].page += 1\r\n\t\t\t\t\tthis.$refs.scroll.finishPullUp() /* 这个无限的加 */\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t#home {\r\n\t\tpadding-top: 35px;\r\n\t}\r\n\r\n\t.home-navbar {\r\n\r\n\t\tbackground-color: var(--color-tint);\r\n\t\tcolor: white;\r\n\t\tposition: fixed;\r\n\t\tz-index: 1;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.tab-home-control {\r\n\t\tposition: fixed;\r\n\t\tz-index: 1;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.content {\r\n\r\n\t\theight: calc(100vh - 87px);\r\n\t\t/*overflow: hidden;*/\r\n\t}\r\n</style>\n"]}]}