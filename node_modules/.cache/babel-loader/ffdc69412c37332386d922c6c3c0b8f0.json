{"remainingRequest":"E:\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js!E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue","mtime":1616219716304},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js","mtime":1613721456817},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"E:\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js","mtime":1613721440296}],"contextDependencies":[],"result":["import _toConsumableArray from \"E:\\\\HBuilderProjects\\\\supermall1\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport scroll from \"../../components/common/scroll/Scroll.vue\";\nimport navbar from \"../../components/common/navar/Navbar.vue\";\nimport HomeSwiper from \"./childHome/HomeSwiper.vue\";\nimport RecommendView from \"./childHome/RecommendView.vue\";\nimport Feature from \"./childHome/Feature.vue\";\nimport TabControl from \"../../components/content/tabControl/TabControl.vue\";\nimport Goods from \"../../components/content/goods/Goods.vue\";\nimport { getHomeMultidata as _getHomeMultidata, getGoods as _getGoods } from \"../../network/home.js\";\nimport backTop from \"../../components/content/backTop/backTop.vue\";\nexport default {\n  name: 'Home',\n  components: {\n    navbar: navbar,\n    HomeSwiper: HomeSwiper,\n    RecommendView: RecommendView,\n    Feature: Feature,\n    TabControl: TabControl,\n    Goods: Goods,\n    backTop: backTop,\n    scroll: scroll\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommend: [],\n      goods: {\n        /* 初始化保存数组，goods的单向绑定*/\n\n        /* 因为是三页*/\n        'pop': {\n          page: 0,\n          list: []\n        },\n\n        /* page:页。list:[]条*/\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      },\n      currentType: 'pop',\n\n      /* 这里是为了默认一个值，来显示数据*/\n      tabOffsetTop: 0,\n      isShow: false,\n\n      /* 当默认开始消失，等滑动超过1000这显示*/\n      istabFixed: false,\n      recommendImg: false\n    };\n  },\n  computed: {\n    /*这里使用的是，计算方法computed*/\n    showGoods: function showGoods() {\n      /* 这里定义了商品的方法*/\n      return this.goods[this.currentType].list;\n      /* 这个数组，指向这个元素的.list*/\n    }\n  },\n\n  /* -2552  14838  15035*/\n  created: function created() {\n    this.getHomeMultidata();\n    this.getGoods('pop');\n    this.getGoods('new');\n    this.getGoods('sell');\n    /* 利用refs去获取tab-control组件的元素的*/\n  },\n  mounted: function mounted() {\n    var refresh = this.debounce(this.$refs.scroll && this.$refs.scroll.refresh, 500);\n    this.$bus.$on('itemImageLoad', function () {\n      refresh();\n    });\n  },\n\n  /* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\n  methods: {\n    debounce: function debounce(func, delay) {\n      var timer = null;\n      return function () {\n        var _this = this;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (timer) return clearTimeout(timer);\n        timer = setTimeout(function () {\n          func.apply(_this, args);\n        }, delay);\n      };\n    },\n    tabClick: function tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop';\n          break;\n\n        case 1:\n          this.currentType = 'new';\n          break;\n\n        case 2:\n          this.currentType = 'sell';\n          break;\n      }\n      /* \t\tthis.$refs.tabControl1.currentIndex = index; //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\n      \t\tthis.$refs.tabControl2.currentIndex = index; */\n\n    },\n    contentScroll: function contentScroll(position) {\n      this.isShow = -position.y > 1000;\n      /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\n\n      this.istabFixed = -position.y + 36 > this.tabOffsetTop;\n    },\n    recommendImgLoad: function recommendImgLoad() {\n      this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n      /* 通过offsetTop js属性拿到可视图高561px*/\n    },\n    swiperImgLoad: function swiperImgLoad() {},\n    LoadMore: function LoadMore() {\n      this.getGoods(this.currentType);\n      this.$refs.scroll.scroll.refresh();\n    },\n    backClick: function backClick() {\n      this.$refs.scroll.scroll.scrollTo(0, 0, 1000);\n    },\n    getHomeMultidata: function getHomeMultidata() {\n      var _this2 = this;\n\n      _getHomeMultidata().then(function (res) {\n        _this2.banners = res.data.banner.list;\n        _this2.recommend = res.data.recommend.list;\n      });\n    },\n    getGoods: function getGoods(type) {\n      var _this3 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getGoods(type, page).then(function (res) {\n        var _this3$goods$type$lis;\n\n        (_this3$goods$type$lis = _this3.goods[type].list).push.apply(_this3$goods$type$lis, _toConsumableArray(res.data.list));\n\n        _this3.goods[type].page += 1;\n\n        _this3.$refs.scroll.finishPullUp();\n        /* 这个无限的加 */\n\n      });\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"home\">\r\n\t\t<navbar class=\"home-navbar\"><template #center>购物街</template></navbar>\r\n\t\t<tab-control :titles=\"['流行','新款','推荐']\" @tabClick=\"tabClick\" class=\"tab-home-control\" v-show=\"istabFixed\"\r\n\t\t\tref=\"tabControl1\" />\r\n\t\t<scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\" @pullingUp=\"LoadMore\"\r\n\t\t\t:probe-type=\"3\">\r\n\r\n\t\t\t<template #scroll>\r\n\t\t\t\t<home-swiper :banners=\"banners\" @swiperImgLoad=\"swiperImgLoad\"></home-swiper>\r\n\t\t\t\t<recommend-view :recommend=\"recommend\" @recommendImgLoad.once=\"recommendImgLoad\"></recommend-view>\r\n\t\t\t\t<Feature></Feature>\r\n\t\t\t\t<tab-control :titles=\"['流行','新款','推荐']\" @tabClick=\"tabClick\" ref=\"tabControl2\"></tab-control>\r\n\t\t\t\t<Goods :goods=\"showGoods\" />{{showGoods.img}}</Goods>\r\n\t\t\t</template>\r\n\t\t</scroll>\r\n\t\t<back-top @click.native='backClick' v-show=\"isShow\"></back-top>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport scroll from '../../components/common/scroll/Scroll.vue'\r\n\timport navbar from '../../components/common/navar/Navbar.vue'\r\n\timport HomeSwiper from './childHome/HomeSwiper.vue'\r\n\timport RecommendView from './childHome/RecommendView.vue'\r\n\timport Feature from './childHome/Feature.vue'\r\n\timport TabControl from '../../components/content/tabControl/TabControl.vue'\r\n\timport Goods from '../../components/content/goods/Goods.vue'\r\n\timport {\r\n\t\tgetHomeMultidata,\r\n\t\tgetGoods\r\n\t} from '../../network/home.js'\r\n\timport backTop from '../../components/content/backTop/backTop.vue'\r\n\texport default {\r\n\t\tname: 'Home',\r\n\t\tcomponents: {\r\n\t\t\tnavbar,\r\n\t\t\tHomeSwiper,\r\n\t\t\tRecommendView,\r\n\t\t\tFeature,\r\n\t\t\tTabControl,\r\n\t\t\tGoods,\r\n\t\t\tbackTop,\r\n\t\t\tscroll\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbanners: [],\r\n\t\t\t\trecommend: [],\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\t/* 初始化保存数组，goods的单向绑定*/\r\n\t\t\t\t\t/* 因为是三页*/\r\n\t\t\t\t\t'pop': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/* page:页。list:[]条*/\r\n\t\t\t\t\t'new': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'sell': {\r\n\t\t\t\t\t\tpage: 0,\r\n\t\t\t\t\t\tlist: []\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcurrentType: 'pop',\r\n\t\t\t\t/* 这里是为了默认一个值，来显示数据*/\r\n\t\t\t\ttabOffsetTop: 0,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\t/* 当默认开始消失，等滑动超过1000这显示*/\r\n\t\t\t\tistabFixed: false,\r\n\t\t\t\trecommendImg: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t/*这里使用的是，计算方法computed*/\r\n\t\t\tshowGoods() {\r\n\t\t\t\t/* 这里定义了商品的方法*/\r\n\t\t\t\treturn this.goods[this.currentType].list /* 这个数组，指向这个元素的.list*/\r\n\t\t\t}\r\n\t\t},\r\n\t\t/* -2552  14838  15035*/\r\n\t\tcreated() {\r\n\t\t\tthis.getHomeMultidata()\r\n\t\t\tthis.getGoods('pop')\r\n\t\t\tthis.getGoods('new')\r\n\t\t\tthis.getGoods('sell')\r\n\t\t\t/* 利用refs去获取tab-control组件的元素的*/\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tconst refresh = this.debounce(this.$refs.scroll && this.$refs.scroll.refresh, 500)\r\n\t\t\tthis.$bus.$on('itemImageLoad', () => {\r\n\t\t\t\trefresh()\r\n\t\t\t})\r\n\t\t},\r\n\t\t/* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\r\n\t\tmethods: {\r\n\t\t\tdebounce(func, delay) {\r\n\t\t\t\tlet timer = null\r\n\t\t\t\treturn function(...args) {\r\n\t\t\t\t\tif (timer) return clearTimeout(timer)\r\n\t\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\t\tfunc.apply(this, args)\r\n\t\t\t\t\t}, delay)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\ttabClick(index) {\r\n\t\t\t\tswitch (index) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.currentType = 'pop'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.currentType = 'new'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tthis.currentType = 'sell'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\t/* \t\tthis.$refs.tabControl1.currentIndex = index; //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\r\n\t\t\t\t\t\tthis.$refs.tabControl2.currentIndex = index; */\r\n\t\t\t},\r\n\t\t\tcontentScroll(position) {\r\n\t\t\t\tthis.isShow = -position.y > 1000; /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\r\n\t\t\t\tthis.istabFixed = (-position.y + 36) > this.tabOffsetTop\r\n\r\n\t\t\t},\r\n\r\n\t\t\trecommendImgLoad() {\r\n\t\t\t\tthis.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop\r\n\t\t\t\t/* 通过offsetTop js属性拿到可视图高561px*/\r\n\t\t\t},\r\n\t\t\tswiperImgLoad() {},\r\n\t\t\tLoadMore() {\r\n\r\n\t\t\t\tthis.getGoods(this.currentType);\r\n\t\t\t\tthis.$refs.scroll.scroll.refresh()\r\n\t\t\t},\r\n\t\t\tbackClick() {\r\n\t\t\t\tthis.$refs.scroll.scroll.scrollTo(0, 0, 1000)\r\n\t\t\t},\r\n\t\t\tgetHomeMultidata() {\r\n\t\t\t\tgetHomeMultidata().then(res => {\r\n\t\t\t\t\tthis.banners = res.data.banner.list\r\n\t\t\t\t\tthis.recommend = res.data.recommend.list\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetGoods(type) {\r\n\t\t\t\tconst page = this.goods[type].page + 1\r\n\t\t\t\tgetGoods(type, page).then(res => {\r\n\t\t\t\t\tthis.goods[type].list.push(...res.data.list)\r\n\t\t\t\t\tthis.goods[type].page += 1\r\n\t\t\t\t\tthis.$refs.scroll.finishPullUp() /* 这个无限的加 */\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t#home {\r\n\t\tpadding-top: 35px;\r\n\t}\r\n\r\n\t.home-navbar {\r\n\r\n\t\tbackground-color: var(--color-tint);\r\n\t\tcolor: white;\r\n\t\tposition: fixed;\r\n\t\tz-index: 1;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t}\r\n\r\n\t.tab-home-control {\r\n\t\tposition: fixed;\r\n\t\tz-index: 1;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.content {\r\n\r\n\t\theight: calc(100vh - 87px);\r\n\t\t/*overflow: hidden;*/\r\n\t}\r\n</style>\n"],"sourceRoot":"src/views/home"}]}