{"remainingRequest":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\src\\views\\home\\Home.vue","mtime":1614600061360},{"path":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\babel-loader\\lib\\index.js","mtime":1613721456817},{"path":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1613721357303},{"path":"C:\\Users\\Administrator\\Documents\\HBuilderProjects\\supermall1\\node_modules\\vue-loader\\lib\\index.js","mtime":1613721440296}],"contextDependencies":[],"result":["import _toConsumableArray from \"C:\\\\Users\\\\Administrator\\\\Documents\\\\HBuilderProjects\\\\supermall1\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport scroll from \"../../components/common/scroll/Scroll.vue\";\nimport navbar from \"../../components/common/navar/Navbar.vue\";\nimport HomeSwiper from \"./childHome/HomeSwiper.vue\";\nimport RecommendView from \"./childHome/RecommendView.vue\";\nimport Feature from \"./childHome/Feature.vue\";\nimport TabControl from \"../../components/content/tabControl/TabControl.vue\";\nimport Goods from \"../../components/content/goods/Goods.vue\";\nimport { getHomeMultidata as _getHomeMultidata, getGoods as _getGoods } from \"../../network/home.js\";\nimport backTop from \"../../components/content/backTop/backTop.vue\";\nexport default {\n  name: 'Home',\n  components: {\n    navbar: navbar,\n    HomeSwiper: HomeSwiper,\n    RecommendView: RecommendView,\n    Feature: Feature,\n    TabControl: TabControl,\n    Goods: Goods,\n    backTop: backTop,\n    scroll: scroll\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommend: [],\n      goods: {\n        /* 初始化保存数组，goods的单向绑定*/\n\n        /* 因为是三页*/\n        'pop': {\n          page: 0,\n          list: []\n        },\n\n        /* page:页。list:[]条*/\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      },\n      currentType: 'pop',\n\n      /* 这里是为了默认一个值，来显示数据*/\n      tabOffsetTop: 0,\n      isShow: false,\n\n      /* 当默认开始消失，等滑动超过1000这显示*/\n      istabFixed: false,\n      recommendImg: false\n    };\n  },\n  computed: {\n    /*这里使用的是，计算方法computed*/\n    showGoods: function showGoods() {\n      /* 这里定义了商品的方法*/\n      return this.goods[this.currentType].list;\n      /* 这个数组，指向这个元素的.list*/\n    }\n  },\n  created: function created() {\n    this.getHomeMultidata();\n    this.getGoods('pop');\n    this.getGoods('new');\n    this.getGoods('sell');\n    /* 利用refs去获取tab-control组件的元素的*/\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    /* mounted挂载*/\n    this.$bus.$on('itemImageLoad', function () {\n      /* 这里的就是重新计算位置，来实时的*/\n      _this.$refs.scroll && _this.$refs.scroll.refresh();\n    });\n  },\n\n  /* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\n  methods: {\n    tabClick: function tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop';\n          break;\n\n        case 1:\n          this.currentType = 'new';\n          break;\n\n        case 2:\n          this.currentType = 'sell';\n          break;\n      }\n\n      this.$refs.tabControl1.currentIndex = index; //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\n\n      this.$refs.tabControl2.currentIndex = index;\n    },\n    contentScroll: function contentScroll(position) {\n      /* \t console.log(position);\n      \t this.contenttop(position); */\n      this.isShow = -position.y > 1000;\n      /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\n\n      this.istabFixed = -position.y + 36 > this.tabOffsetTop;\n    },\n    recommendImgLoad: function recommendImgLoad() {\n      this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n    },\n    swiperImgLoad: function swiperImgLoad() {},\n    LoadMore: function LoadMore() {\n      // console.log('上拉加载更多');\n      this.getGoods(this.currentType);\n      this.$refs.scroll.scroll.refresh();\n    },\n    backClick: function backClick() {\n      this.$refs.scroll.scroll.scrollTo(0, 0, 1000);\n    },\n    getHomeMultidata: function getHomeMultidata() {\n      var _this2 = this;\n\n      _getHomeMultidata().then(function (res) {\n        console.log(res);\n        _this2.banners = res.data.banner.list;\n        _this2.recommend = res.data.recommend.list;\n      });\n    },\n    getGoods: function getGoods(type) {\n      var _this3 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getGoods(type, page).then(function (res) {\n        var _this3$goods$type$lis;\n\n        (_this3$goods$type$lis = _this3.goods[type].list).push.apply(_this3$goods$type$lis, _toConsumableArray(res.data.list));\n\n        _this3.goods[type].page += 1;\n\n        _this3.$refs.scroll.finishPullUp();\n        /* 这个无限的加 */\n\n      });\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div id=\"home\">\r\n\t\t<navbar class=\"home-navbar\" @click.native=\"backClick\"><template #center>购物街</template></navbar>\r\n\t\t <tab-control :titles=\"['流行','新款','推荐']\" @tabClick=\"tabClick\" class=\"tab-home-control\" v-show=\"istabFixed\" ref=\"tabControl1\"/>\r\n\t\t<scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> <!-- ：probe-type=\"3\"说明这个要实时监听位置,popros数值-->\r\n\t\t<template #scroll>\t\r\n\t\t<home-swiper v-bind:banners=\"banners\" @swiperImgLoad=\"swiperImgLoad\"></home-swiper>\r\n\t\t<recommend-view :recommend=\"recommend\"  @recommendImgLoad.once=\"recommendImgLoad\"></recommend-view>\r\n\t\t<Feature></Feature>\r\n\t\t <tab-control :titles=\"['流行','新款','推荐']\"  @tabClick=\"tabClick\" ref=\"tabControl2\"></tab-control>\r\n\t\t<Goods :goods=\"showGoods\"/>{{showGoods.img}}</Goods>\r\n\t\t</template>\r\n\t\t</scroll>\r\n\t<back-top @click.native='backClick' v-show=\"isShow\"></back-top>\t\r\n</div>\n</template>\r\n\n<script>\r\n\timport  scroll from '../../components/common/scroll/Scroll.vue'\r\n\timport navbar from '../../components/common/navar/Navbar.vue'\r\n\timport HomeSwiper from './childHome/HomeSwiper.vue'\r\n\timport RecommendView from './childHome/RecommendView.vue'\r\n\timport Feature  from './childHome/Feature.vue'\r\n\timport TabControl from '../../components/content/tabControl/TabControl.vue'\r\n\timport Goods from '../../components/content/goods/Goods.vue'\r\n\timport {getHomeMultidata,getGoods} from  '../../network/home.js'\r\n\timport backTop from '../../components/content/backTop/backTop.vue'\n\texport default{\n\t\tname:'Home',\r\n\t\tcomponents:{navbar,HomeSwiper,RecommendView,Feature,TabControl,Goods,backTop,scroll},\r\n\t\tdata(){return{\r\n\t\t\tbanners:[],\r\n\t\t\trecommend:[],\r\n\t\t\tgoods:{                                   /* 初始化保存数组，goods的单向绑定*/  /* 因为是三页*/\r\n\t\t\t\t'pop':{page:0,list:[]},              /* page:页。list:[]条*/\r\n\t\t\t\t'new':{page:0,list:[]},\r\n\t\t\t\t'sell':{page:0,list:[]},\r\n\t\t\t},\r\n\t\t\tcurrentType:'pop',                   /* 这里是为了默认一个值，来显示数据*/\r\n\t\t\ttabOffsetTop:0,\t\t\t            \r\n\t\t\tisShow:false,                      /* 当默认开始消失，等滑动超过1000这显示*/\r\n\t\t\tistabFixed:false,\r\n\t\t     recommendImg:false}},\r\n\t\tcomputed:{                                           /*这里使用的是，计算方法computed*/\r\n\t\t showGoods(){                                       /* 这里定义了商品的方法*/                \r\n\t\t    return this.goods[this.currentType].list          /* 这个数组，指向这个元素的.list*/\r\n\t\t  }\r\n\t\t},\r\n\t\t\r\n\t\tcreated(){\r\n\t\t\tthis.getHomeMultidata()\r\n\t\t\tthis.getGoods('pop')\r\n\t\t\tthis.getGoods('new')\r\n\t\t\tthis.getGoods('sell')\r\n\t/* 利用refs去获取tab-control组件的元素的*/\r\n\t\t},\r\n      mounted(){                                         /* mounted挂载*/\r\n\tthis.$bus.$on('itemImageLoad',()=>{                 /* 这里的就是重新计算位置，来实时的*/\r\n\tthis.$refs.scroll&&this.$refs.scroll.refresh()\r\n\t})\r\n\t  },\r\n\t  /* <scroll class=\"content\" ref=\"scroll\" @scroll=\"contentScroll\" :pull-up-load=\"true\"  @pullingUp=\"LoadMore\"  :probe-type=\"3\"> */\r\n\t\tmethods:{\r\n\t\t\t\r\n\t\t tabClick(index){\r\n\t\t\t switch(index){\r\n\t\t\t \t\tcase 0:\r\n\t\t\t\t\t this.currentType='pop'\r\n\t\t\t\t\t break\r\n\t\t\t\t\t case 1:\r\n\t\t\t\t\t this.currentType='new'\r\n\t\t\t\t\t break\r\n\t\t\t\t\t case 2:\r\n\t\t\t\t\t this.currentType='sell'\r\n\t\t\t\t\t break\r\n\t\t\t }\r\n\t\tthis.$refs.tabControl1.currentIndex = index;   //这里就是理解: 这里，使用refs指向，元素tabControl1.currenIndex=参数\r\n\t\tthis.$refs.tabControl2.currentIndex = index;\r\n\t\t },\r\n\t\t contentScroll(position){\r\n\t\t/* \t console.log(position);\r\n\t\t\t this.contenttop(position); */\r\n\t\t\t this.isShow=-position.y>1000 ;            /* 这里是判断哪个按钮什么时候显示大于1000则消失*/\r\n\t\t\t this.istabFixed = (-position.y +36) > this.tabOffsetTop\r\n\t\t },\r\n\t\t recommendImgLoad(){\r\n\t\t\t this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop\r\n\t\t },\r\n\t\tswiperImgLoad(){\r\n\t\t},\r\n\t\tLoadMore(){\r\n\t\t\t   // console.log('上拉加载更多');\r\n\t\t\t   this.getGoods(this.currentType);\r\n\t\t\t   this.$refs.scroll.scroll.refresh()\r\n\t\t },\r\n\t\t backClick(){\r\n\t\t\tthis.$refs.scroll.scroll.scrollTo(0, 0, 1000)\r\n\t\t },\r\n\t\t  getHomeMultidata(){\r\n\t\t\t  getHomeMultidata().then(res=>{\r\n\t\t\t\t  console.log(res)\r\n\t\t\t\tthis.banners=res.data.banner.list\r\n\t\t\t    this.recommend=res.data.recommend.list\r\n\t\t\t  })\r\n\t\t  },\r\n\t\t  getGoods(type){\r\n\t\t\t     const page = this.goods[type].page + 1 \r\n\t\t\t      getGoods(type,page).then(res=>{\r\n\t\t\t\t  this.goods[type].list.push(...res.data.list)\r\n\t\t\t\t  this.goods[type].page += 1\r\n\t\t\t\t  this.$refs.scroll.finishPullUp()/* 这个无限的加 */\r\n\t\t\t\t \r\n\t\t\t  })\r\n\t\t  },\r\n\t\t  \r\n\t}\r\n\t\t \n\t}\r\n\t \n</script>\n\n<style scoped>\r\n\t#home{\r\n\t\tpadding-top: 35px;\r\n\t}\r\n\t.home-navbar{\r\n\t\t\r\n\t  background-color: var(--color-tint);\r\n\t  color: white;\r\n\t  position: fixed;\r\n\t  z-index: 1;\r\n\t  left: 0;\r\n\t  right: 0;\r\n\t  top: 0;\r\n\t}\r\n\t.tab-home-control{\r\n\t\t  position:fixed;\r\n\t\t  z-index: 1;\r\n\t\t  width: 100%;\r\n\t}\r\n .content{\r\n\n    height: calc(100vh - 87px);\n    /*overflow: hidden;*/\n  }\t\r\n\n</style>\n"],"sourceRoot":"src/views/home"}]}